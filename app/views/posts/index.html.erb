<h1>Posts#index</h1>
<% @categories.each do |category| %>
  <%= link_to "#{category.name}", posts_path(category: "#{category.id}") %>
<% end %>

<table class="table table-hover">
  <thead>
    <tr>
      <th scope="col"><%= link_to "replies count", posts_path(order: "replies") %></th>
      <th scope="col">title</th>
      <th scope="col"><%= link_to "last replies at", posts_path(order: "last_replies") %></th>
      <th scope="col"><%= link_to "viewed count", posts_path(order: "views") %></th>
    </tr>
  </thead>
  <tbody>
    <% @posts.each do |post| %>
      <tr data-link="<%= post_path(post)%>">
        <td>[<%= post.replies_count %>]</td>
        <td><%= post.title %></td>
        <td><%= time_tag post.replies.last.created_at if post.replies.present? %></td>
        <td>[<%= post.views_count %>]</td>
      </tr>
    <% end %>
  </tbody>
</table>


<script>
  // 用jquery 實作點擊事件
  $("tr[data-link]").on('click', function(){
    window.location = $(this).data("link");
  });
</script>